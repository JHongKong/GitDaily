## 趣谈网络协议——刘超

### 1.为什么要学习网络协议？

- 协议三要素
- 一次网页请求过程做了什么

### 2.网络分层的真正含义是什么？

- 层级关系（比如TCP进行三次握手时，IP层和MAC层在做什么）
- 通过目标IP，怎么知道我最终的目的地
- 底层设备有没有上层设备的内容？（二层设备处理的包里，有没有HTTP层的内容）

复杂的程序都要分层，这是程序设计的要求

**※ 只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有有上层没下层**

#### 什么叫二层设备，三层设备

就是只把MAC头摘下来，看看到底是丢弃、转发，还是自己留着。那什么是三层设备呢？就是把MAC头摘下来之后，再把IP头摘下来，看看到底是丢弃、转发，还是自己留着

### 3.Ifconfig:最熟悉又陌生的命令行

`Linux`可以用`ip addr`命令看`IP`信息

**IP地址是一个网卡在网络世界的通讯地址，相当于我们现实世界的门派号码**

#### 无类型域间选路(CIDR)

网络号+主机号、广播地址、子网掩码

### 4.DHCP与PXE：IP是怎么来的，又是怎么没的？

这节主要讲：

1. 内网IP改变会带来怎样的影响
2. DHCP(Dynamic Host Configuration Protocol 动态主机配置协议)分发IP的过程

#### 如何配置IP地址？

用`net-tools`或`iproute2`

不要乱改内网IP

![](https://kongjhong-image.oss-cn-beijing.aliyuncs.com/img/20190511224428.png)

**※ Linux默认的逻辑是，如果这是一个跨网段的调用，它便不会直接发送到网络上，而是企图将包发送到网关**

### 5.从物理层到MAC层：如何在宿舍里自己组网玩联机游戏

底2层的设备产生原因和相关协议

#### 第一层：物理层

局域网(LAN),集线器(Hub)

#### 第二层: 数据链路层

交换机、转发表



### 6.交换机和VLAN

- 当交换机的数目越来越多的时候，会遭遇环路问题，让网络包迷路，这就需要使用STP协议，通过华山论剑比武的方式，将有环路的图变成没有环路的树，从而解决环路问题。
- 交换机数目多会面临隔离问题，可以通过VLAN形成虚拟局域网，从而解决广播问题和安全问题



### 7.ICMP和Ping:投石问路的侦察兵

- ICMP相当于网络世界的侦察兵。这篇讲了两种类型的ICMP报文，一种是主动探查的查询报文，一种是异常报告的差错报文。
- ping使用查询报文，Traceroute使用差错报文



### 8.世界那么大，我想出网关：欧洲十日游和玄奘西行

